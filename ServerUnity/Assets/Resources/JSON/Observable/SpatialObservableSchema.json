{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Spatial Observable (minimal)",
  "type": "object",
  "required": ["observableId", "predicate"],
  "additionalProperties": false,

  "properties": {
    "observableId": {
      "type": "string",
      "description": "Globally-unique identifier for this observable."
    },

    "predicate": {
      "type": "object",
      "required": ["name", "logicOp", "primitives"],
      "additionalProperties": false,

      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "logicOp": {
          "type": "string",
          "enum": ["AND", "OR", "NOT"],
          "description": "Operator used to combine primitive predicates."
        },
        "primitives": {
          "type": "array",
          "minItems": 1,
          "items": { "type": "string" }
        }
      }
    },

    "publish": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "payloadTemplate": {
          "type": "object",
          "description": "Free-form template; all keys and values allowed.",
          "additionalProperties": true
        }
      }
    }
  }
}
